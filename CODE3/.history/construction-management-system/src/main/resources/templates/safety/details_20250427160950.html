<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安全监控记录详情</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <style>
        .detail-label {
            font-weight: bold;
            color: #495057;
        }
        .detail-value {
            padding: 0.375rem 0.75rem;
            background-color: #f8f9fa;
            border-radius: 0.25rem;
        }
        .severity-high {
            color: #dc3545;
            font-weight: bold;
        }
        .severity-medium {
            color: #ffc107;
            font-weight: bold;
        }
        .severity-low {
            color: #28a745;
        }
        .status-pending {
            color: #6c757d;
        }
        .status-processing {
            color: #17a2b8;
        }
        .status-resolved {
            color: #28a745;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="row mb-4">
            <div class="col">
                <h2>安全监控记录详情</h2>
            </div>
            <div class="col text-right">
                <a th:href="@{/safety}" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> 返回列表
                </a>
                <a th:href="@{/safety/{id}/edit(id=${record.id})}" class="btn btn-primary">
                    <i class="bi bi-pencil"></i> 编辑
                </a>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <h5 class="card-title">基本信息</h5>
                        <table class="table table-bordered">
                            <tr>
                                <th class="detail-label" style="width: 30%">记录ID</th>
                                <td class="detail-value" th:text="${record.id}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">工人ID</th>
                                <td class="detail-value" th:text="${record.workerId}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">项目ID</th>
                                <td class="detail-value" th:text="${record.projectId}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">事件类型</th>
                                <td class="detail-value" th:text="${record.eventType}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">严重程度</th>
                                <td class="detail-value">
                                    <span th:class="${'severity-' + 
                                        (record.severityLevel == '高' ? 'high' : 
                                         record.severityLevel == '中' ? 'medium' : 'low')}"
                                          th:text="${record.severityLevel}">
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th class="detail-label">发生时间</th>
                                <td class="detail-value" th:text="${#temporals.format(record.occurrenceTime, 'yyyy-MM-dd HH:mm')}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">位置</th>
                                <td class="detail-value" th:text="${record.location}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">处理状态</th>
                                <td class="detail-value">
                                    <span th:class="${'status-' + 
                                        (record.status == '待处理' ? 'pending' : 
                                         record.status == '处理中' ? 'processing' : 'resolved')}"
                                          th:text="${record.status}">
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h5 class="card-title">处理信息</h5>
                        <table class="table table-bordered">
                            <tr>
                                <th class="detail-label" style="width: 30%">处理人</th>
                                <td class="detail-value" th:text="${record.handler != null ? record.handler : '未指定'}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">处理时间</th>
                                <td class="detail-value" th:text="${record.handleTime != null ? #temporals.format(record.handleTime, 'yyyy-MM-dd HH:mm') : '未处理'}"></td>
                            </tr>
                            <tr>
                                <th class="detail-label">处理结果</th>
                                <td class="detail-value" th:text="${record.result != null ? record.result : '未处理'}"></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 mb-3">
                        <h5 class="card-title">事件描述</h5>
                        <div class="detail-value" style="min-height: 100px;" th:text="${record.description}"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 mb-3">
                        <h5 class="card-title">处理措施</h5>
                        <div class="detail-value" style="min-height: 80px;" th:text="${record.measures != null ? record.measures : '暂无处理措施'}"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h5 class="card-title">备注</h5>
                        <div class="detail-value" style="min-height: 80px;" th:text="${record.remarks != null ? record.remarks : '暂无备注'}"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html> 